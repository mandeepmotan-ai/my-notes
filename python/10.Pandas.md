# Pandas

- **Pandas** = Python library for working with structured data (tables, spreadsheets, SQL-like data).
- Built on top of **NumPy** â†’ fast + powerful.
- Main data structures:
    1. **Series** â†’ 1D labeled array (like a column).
    2. **DataFrame** â†’ 2D labeled data structure (like an Excel sheet / SQL table).

ðŸ‘‰ Think of Pandas as **Excel + SQL + NumPy combined**.

### Creating Series

```kotlin
import pandas as pd

# from list
s = pd.Series([10, 20, 30, 40], index=['a', 'b', 'c', 'd'])
print(s)
```

### Creating DataFrame

```kotlin
data = {
    'Name': ['Alice', 'Bob', 'Charlie'],
    'Age': [25, 30, 35],
    'City': ['Delhi', 'Mumbai', 'Bangalore']
}

df = pd.DataFrame(data)
print(df)
```

### Reading and Writing Data

```kotlin
# Read CSV
df = pd.read_csv("data.csv")

# Write CSV
df.to_csv("output.csv", index=False)
```

### Basic Pandas Operations

```kotlin
print(df.head())   # first 5 rows
print(df.tail())   # last 5 rows
print(df.shape)    # (rows, columns)
print(df.info())   # column types + memory
print(df.describe())  # summary stats
```

### Accessing Data

```kotlin
# by column
print(df['Name'])

# multiple columns
print(df[['Name', 'City']])

# by row index
print(df.loc[0])   # using label/index
print(df.iloc[1])  # using integer position
```

### Filtering Data

```kotlin
# condition filtering
print(df[df['Age'] > 28])

# multiple conditions
print(df[(df['Age'] > 25) & (df['City'] == 'Mumbai')])
```

### Modifying Data

```kotlin
df['Salary'] = [50000, 60000, 70000]  # add new column
df['Age'] = df['Age'] + 1             # update column
df.drop('City', axis=1, inplace=True) # drop column
```

### Sorting and Indexing

```kotlin
print(df.sort_values(by='Age', ascending=False))
print(df.set_index('Name'))
```

### Handling Missing Values

```kotlin
df = pd.DataFrame({'A':[1,2,None], 'B':[4,None,6]})

print(df.isnull())       # check missing
print(df.fillna(0))      # replace with 0
print(df.dropna())       # drop missing rows
```

## Advanced Pandas

### Sample Dataset

```kotlin
import pandas as pd

data = {
    'Name': ['Alice', 'Bob', 'Charlie', 'David', 'Eva', 'Frank', 'Grace'],
    'Age': [23, 25, 23, 24, 22, 25, 24],
    'Math': [85, 90, 78, 92, 88, 76, 95],
    'Science': [91, 85, 89, 95, 82, 80, 88],
    'City': ['Delhi', 'Mumbai', 'Delhi', 'Chennai', 'Mumbai', 'Delhi', 'Chennai']
}

df = pd.DataFrame(data)
print(df)
```

### GroupBy (Aggregation)

```kotlin
# Average scores by city
print(df.groupby('City')[['Math','Science']].mean())

# Count students per city
print(df.groupby('City')['Name'].count())
```

### Multi-Indexing

```kotlin
# Group by multiple columns
grouped = df.groupby(['City','Age'])[['Math','Science']].mean()
print(grouped)
```

### Pivot Tables

```kotlin
pivot = df.pivot_table(values='Math', index='City', columns='Age', aggfunc='mean')
print(pivot)
```

### Apply() for custom functions

```kotlin
# Custom grading function
def grade(score):
    if score >= 90: return "A"
    elif score >= 80: return "B"
    else: return "C"

df['Math_Grade'] = df['Math'].apply(grade)
print(df)
```

### Vectorized Operations

```kotlin
# Convert names to uppercase
print(df['Name'].str.upper())

# Filter students with names starting with 'A'
print(df[df['Name'].str.startswith('A')])
```

### Merging and Joining

```kotlin
extra = pd.DataFrame({
    'Name': ['Alice', 'Bob', 'Charlie', 'Eva'],
    'Sports': ['Tennis','Football','Cricket','Hockey']
})

merged = pd.merge(df, extra, on='Name', how='left')
print(merged)
```

### Handling Missing Data (Advanced)

```kotlin
df2 = df.copy()
df2.loc[2,'Math'] = None  # introduce missing value

print(df2.fillna(df2['Math'].mean()))  # replace with mean
```

### Window Functions (Rolling and Expanding)

```kotlin
# Rolling average of Math scores (window = 3)
print(df['Math'].rolling(window=3).mean())
```

### Query() for Clean filtering

```kotlin
print(df.query("Age > 23 and City == 'Delhi'"))
```