# Object Cloning

# Object

- object in JavaScript are **collection of key-value pairs**
- **keys** *(properties)* are always strings or symbols and **values** *(value for properties)* can be of any type primitive or reference

```jsx
let user = {
  name: "Mandeep",
  age: 22,
  isAdmin: true
};
```

## Dynamic Nature of Objects

- Objects in JS are dynamic means:
    - we can add properties (keys) at runtime
    - we can delete properties at runtime
    - we can modify existing properties
- this dynamic nature make objects in JavaScript super flexible

```jsx
let person = { name: "Alex" };

person.age = 30;          // add
person.name = "Mandeep";  // modify
delete person.name;       // delete

console.log(person); // { age: 30 }
```

## Object cloning

- used to duplicate objects
- but as we know objects are stored in heap memory, so simple copying them would just usually create a reference, not a true independent copy
- Ways of cloning objects:

### Using spread operator (`...`)

- easy, modern, shallow copy

⚠️ Nested objects are **still shared** (not deep cloned)

```jsx
let user = { name: "Mandeep", age: 22 };
let clone = { ...user };

console.log(clone); // { name: "Mandeep", age: 22 }
```

### Using `Object.assign()`

- equivalent to spread

⚠️ Also shallow copy 

```jsx
let user = { name: "Mandeep", age: 22 };
let clone = Object.assign({}, user);

console.log(clone); // { name: "Mandeep", age: 22 }
```

### with Iteration (manual copy)

- works even in old JS

⚠️ Still shallow copy

```jsx
let user = { name: "Mandeep", age: 22 };
let clone = {};

for (let key in user) {
  clone[key] = user[key];
}

console.log(clone); // { name: "Mandeep", age: 22 }
```

### Deep cloning JSON method

- true deep copy

⚠️ Loses functions, undefined, Date, Symbol

```jsx
let user = { name: "Mandeep", address: { city: "Delhi" } };
let deepClone = JSON.parse(JSON.stringify(user));

deepClone.address.city = "Mumbai";

console.log(user.address.city);     // Delhi (original not affected)
console.log(deepClone.address.city); // Mumbai
```

### Deep cloning `StructuredClone` API, modern JS

- best modern way

⚠️ Not supported in very old browsers

```jsx
let user = { name: "Mandeep", address: { city: "Delhi" } };
let deepClone = structuredClone(user);

deepClone.address.city = "Mumbai";

console.log(user.address.city);     // Delhi
console.log(deepClone.address.city); // Mumbai
```